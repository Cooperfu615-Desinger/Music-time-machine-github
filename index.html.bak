<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音樂時光機</title>
    
    <!-- 1. 載入 Tailwind CSS (樣式庫) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. 設定 Import Map (讓瀏覽器看懂 import 語法) -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.263.1"
        }
    }
    </script>

    <!-- 3. 載入 Babel (將 JSX 轉換為瀏覽器可執行的 JavaScript) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 自訂樣式：隱藏捲軸但保留功能 -->
    <style>
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.5s ease-out forwards;
        }
        .animate-fade-in-up {
            animation: fade-in-up 0.5s ease-out forwards;
        }
        .delay-100 {
            animation-delay: 0.1s;
        }
    </style>
</head>
<body class="bg-slate-900">
    <!-- 這是 React 應用程式的掛載點 -->
    <div id="root"></div>

    <!-- 4. React 程式碼邏輯 -->
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        // 注意：在瀏覽器環境直接引用 lucide-react 時，確保 import map 版本正確
        import { Play, Music, Users, Info, ChevronRight, ChevronLeft, GitBranch, Search, X, List, Clock, Filter } from 'lucide-react';

        // --- 資料庫開始 ---
        const musicData = {
            1960: [
                {
                genre: "早期搖滾 (Rock and Roll)",
                desc: "延續 50 年代的狂熱，但開始變得更加精緻。這是貓王退伍後的時期，也是搖滾樂逐漸從叛逆轉向主流的過渡期。",
                subGenres: ["Rockabilly", "Doo-wop", "Surf Rock"],
                artists: ["Elvis Presley", "Chuck Berry", "Roy Orbison", "The Everly Brothers"]
                },
                {
                genre: "靈魂樂 (Soul Music)",
                desc: "非裔美國福音音樂與節奏藍調的結合，強調充滿感情的歌聲與呼應式的演唱風格，摩城唱片 (Motown) 開始嶄露頭角。",
                subGenres: ["Southern Soul", "Chicago Soul", "Uptown Soul"],
                artists: ["Sam Cooke", "Ray Charles", "Ben E. King", "Jackie Wilson"]
                },
                {
                genre: "民謠復興 (Folk Revival)",
                desc: "年輕一代開始關注社會議題，傳統民謠以現代形式重新演繹，歌詞充滿詩意與政治意涵。",
                subGenres: ["Protest Songs", "Greenwich Village Scene", "Contemporary Folk"],
                artists: ["Joan Baez", "The Kingston Trio", "Peter, Paul and Mary"]
                },
                {
                genre: "自由爵士 / 模態爵士 (Free / Modal Jazz)",
                desc: "爵士樂手打破傳統和弦結構，追求極致的即興與自由，是爵士樂最具實驗性的時期。",
                subGenres: ["Avant-garde Jazz", "Post-Bop", "Third Stream"],
                artists: ["Ornette Coleman", "John Coltrane", "Miles Davis", "Charles Mingus"]
                }
            ],
            1965: [
                {
                genre: "英倫入侵 (British Invasion)",
                desc: "英國搖滾樂團橫掃美國流行榜的文化現象，將搖滾樂推向了前所未有的藝術高度。",
                subGenres: ["Merseybeat", "Beat Music", "British Blues"],
                artists: ["The Beatles", "The Rolling Stones", "The Kinks", "The Who"]
                },
                {
                genre: "民謠搖滾 (Folk Rock)",
                desc: "鮑勃·狄倫將電吉他帶入民謠，融合了民謠的歌詞深度與搖滾的節奏感。",
                subGenres: ["Psychedelic Folk", "Country Rock", "Electric Folk"],
                artists: ["Bob Dylan", "The Byrds", "Simon & Garfunkel"]
                },
                {
                genre: "摩城之聲 (Motown Sound)",
                desc: "底特律的摩城唱片創造了獨特的流行靈魂樂風格，具有強烈的節奏與管弦樂編排。",
                subGenres: ["Girl Group Sound", "Pop-Soul", "Northern Soul"],
                artists: ["The Supremes", "The Temptations", "Four Tops", "Smokey Robinson"]
                },
                {
                genre: "後波普爵士 (Post-Bop)",
                desc: "融合了硬波普、模態爵士與自由爵士的元素，保留了搖擺感但結構更加複雜抽象。",
                subGenres: ["Spiritual Jazz", "Soul Jazz", "Modern Mainstream"],
                artists: ["Wayne Shorter", "Herbie Hancock", "McCoy Tyner", "Lee Morgan"]
                }
            ],
            1970: [
                {
                genre: "硬式搖滾 / 重金屬",
                desc: "受藍調搖滾影響，使用高增益電吉他與強烈鼓點，聲音更加厚重、吵雜，奠定了重金屬的基礎。",
                subGenres: ["Blues Rock", "Shock Rock", "Proto-Metal"],
                artists: ["Led Zeppelin", "Black Sabbath", "Deep Purple"]
                },
                {
                genre: "前衛搖滾 (Progressive Rock)",
                desc: "試圖提升搖滾樂的藝術層次，融入古典、爵士元素，歌曲結構複雜且長度較長。",
                subGenres: ["Symphonic Rock", "Canterbury Scene", "Space Rock"],
                artists: ["Pink Floyd", "King Crimson", "Yes", "Genesis"]
                },
                {
                genre: "軟搖滾 (Soft Rock)",
                desc: "強調優美的旋律與和聲，歌詞通常關於愛情或日常生活，適合電台播放。",
                subGenres: ["Yacht Rock", "Sunshine Pop", "Singer-Songwriter"],
                artists: ["The Carpenters", "Bread", "James Taylor", "Elton John"]
                },
                {
                genre: "爵士融合 (Jazz Fusion)",
                desc: "爵士樂手開始使用電氣化樂器，融合搖滾的節奏與放克的律動，邁爾士·戴維斯開啟了新紀元。",
                subGenres: ["Jazz-Rock", "Jazz-Funk", "Electric Jazz"],
                artists: ["Miles Davis (Electric era)", "Weather Report", "Mahavishnu Orchestra", "Chick Corea"]
                }
            ],
            1975: [
                {
                genre: "迪斯可 (Disco)",
                desc: "源於美國夜店文化，強調強烈的低音貝斯與四四拍節奏，旨在讓人跳舞的舞曲風格。",
                subGenres: ["Euro Disco", "Hi-NRG", "Italo Disco"],
                artists: ["Bee Gees", "Donna Summer", "KC and the Sunshine Band", "ABBA"]
                },
                {
                genre: "龐克搖滾 (Punk Rock)",
                desc: "反對主流搖滾的過度製作，強調極簡、快速、充滿攻擊性的音樂與反體制精神。",
                subGenres: ["Proto-Punk", "Hardcore Punk", "Anarcho-Punk"],
                artists: ["Ramones", "Sex Pistols", "The Clash", "Patti Smith"]
                },
                {
                genre: "放克 (Funk)",
                desc: "強調貝斯與鼓的律動 (Groove)，弱化旋律與和聲，是舞曲與嘻哈的重要基石。",
                subGenres: ["P-Funk", "Deep Funk", "Disco-Funk"],
                artists: ["Parliament-Funkadelic", "Earth, Wind & Fire", "Kool & the Gang"]
                },
                {
                genre: "雷鬼 (Reggae)",
                desc: "源自牙買加，強調反拍節奏 (Off-beat) 與重低音，Bob Marley 將其推向國際主流。",
                subGenres: ["Roots Reggae", "Dub", "Rocksteady"],
                artists: ["Bob Marley", "Peter Tosh", "Jimmy Cliff", "Burning Spear"]
                }
            ],
            1980: [
                {
                genre: "新浪潮 (New Wave)",
                desc: "保留了龐克的活力但更加流行化，大量使用合成器，風格多變且具有實驗性。",
                subGenres: ["Synth-Pop", "New Romantic", "Dark Wave"],
                artists: ["Blondie", "Talking Heads", "The Police", "Devo"]
                },
                {
                genre: "後迪斯可 / 流行舞曲",
                desc: "迪斯可式微後的演變，結合電子樂器與流行旋律，麥可傑克森的《Off the Wall》為代表。",
                subGenres: ["Dance-Pop", "Urban Contemporary", "Boogie"],
                artists: ["Michael Jackson", "Prince", "Diana Ross"]
                },
                {
                genre: "競技場搖滾 (Arena Rock)",
                desc: "專為大型體育場演出設計的搖滾樂，副歌朗朗上口，強調商業上的成功。",
                subGenres: ["AOR", "Glam Rock", "Power Ballad"],
                artists: ["AC/DC", "Queen", "Journey", "Van Halen"]
                },
                {
                genre: "平滑爵士 (Smooth Jazz)",
                desc: "爵士融合樂的商業化分支，強調旋律優美、輕鬆的氛圍，常作為背景音樂或電台播放。",
                subGenres: ["Quiet Storm", "Pop-Jazz", "Crossover Jazz"],
                artists: ["Kenny G", "George Benson", "Sade", "Grover Washington Jr."]
                }
            ],
            1985: [
                {
                genre: "合成器流行 (Synth-pop)",
                desc: "合成器成為主要樂器，電子音色主導旋律，MV 的興起推動了這種極具視覺風格的音樂。",
                subGenres: ["Italo Disco", "Hi-NRG", "Futurepop"],
                artists: ["A-ha", "Duran Duran", "Depeche Mode", "Eurythmics"]
                },
                {
                genre: "華麗金屬 (Glam Metal)",
                desc: "又稱髮型金屬，結合了重金屬的強度與流行樂的旋律，樂手造型誇張華麗。",
                subGenres: ["Hair Metal", "Pop Metal", "Sleaze Rock"],
                artists: ["Mötley Crüe", "Bon Jovi", "Guns N' Roses", "Poison"]
                },
                {
                genre: "黃金年代嘻哈 (Golden Age)",
                desc: "嘻哈音樂進入創新爆發期，採樣技術成熟，歌詞內容多樣化，開始進入主流視野。",
                subGenres: ["Boom Bap", "Jazz Rap", "Conscious Hip Hop"],
                artists: ["Run-D.M.C.", "LL Cool J", "Beastie Boys", "Public Enemy"]
                },
                {
                genre: "另類搖滾 (Alternative Rock)",
                desc: "地下音樂場景開始蓬勃發展，大學電台推動了不屬於主流金屬或流行音樂的搖滾風格。",
                subGenres: ["Jangle Pop", "College Rock", "Gothic Rock", "Noise Rock"],
                artists: ["R.E.M.", "The Smiths", "The Cure", "Sonic Youth"]
                }
            ],
            1990: [
                {
                genre: "Grunge (油漬搖滾)",
                desc: "源於西雅圖，融合龐克與重金屬，歌詞充滿焦慮與內省，終結了華麗金屬的統治。",
                subGenres: ["Post-Grunge", "Sludge Metal", "Riot Grrrl"],
                artists: ["Nirvana", "Pearl Jam", "Soundgarden", "Alice in Chains"]
                },
                {
                genre: "幫派饒舌 (Gangsta Rap)",
                desc: "真實描繪街頭生活與暴力，引發爭議但也極受歡迎，西岸嘻哈成為主流。",
                subGenres: ["G-Funk", "West Coast Hip Hop", "Hardcore Hip Hop"],
                artists: ["N.W.A", "Dr. Dre", "Snoop Dogg", "Tupac Shakur"]
                },
                {
                genre: "浩室音樂 (House)",
                desc: "源於芝加哥的電子舞曲，強調 4/4 拍機械節奏，90 年代透過瑪丹娜等流行歌手傳播至全球。",
                subGenres: ["Deep House", "Acid House", "Eurodance", "Diva House"],
                artists: ["Madonna (Vogue era)", "C+C Music Factory", "Daft Punk (Early)"]
                },
                {
                genre: "酸爵士 / 吹普霍普 (Acid Jazz / Trip-hop)",
                desc: "結合爵士取樣、放克節奏與嘻哈元素，源於英國 Bristol 的地下場景，氛圍迷幻慵懶。",
                subGenres: ["Bristol Sound", "Downtempo", "Nu-Jazz"],
                artists: ["Massive Attack", "Portishead", "Jamiroquai", "Erykah Badu"]
                }
            ],
            1995: [
                {
                genre: "英倫搖滾 (Britpop)",
                desc: "英國樂團對抗美國 Grunge 風潮的回應，強調英國文化認同，旋律優美且明亮。",
                subGenres: ["Post-Britpop", "Madchester", "Indie Pop"],
                artists: ["Oasis", "Blur", "Pulp", "Radiohead"]
                },
                {
                genre: "流行龐克 (Pop Punk)",
                desc: "結合龐克的能量與流行樂的旋律，歌詞多關於青少年成長的煩惱，極具商業吸引力。",
                subGenres: ["Skate Punk", "Emo Pop", "Easycore"],
                artists: ["Green Day", "The Offspring", "Blink-182", "Weezer"]
                },
                {
                genre: "R&B / Hip Hop Soul",
                desc: "當代 R&B 與嘻哈節奏的完美結合，展現了極高水準的轉音技巧與製作水準。",
                subGenres: ["Neo-Soul", "New Jack Swing", "Urban Pop"],
                artists: ["Mariah Carey", "TLC", "Boyz II Men", "Mary J. Blige"]
                },
                {
                genre: "IDM / 智慧舞曲",
                desc: "Intelligent Dance Music，強調在家聆聽而非夜店跳舞的電子音樂，結構複雜且具實驗性。",
                subGenres: ["Glitch", "Braindance", "Ambient Techno"],
                artists: ["Aphex Twin", "Boards of Canada", "Autechre", "Squarepusher"]
                }
            ],
            2000: [
                {
                genre: "Nu Metal (新金屬)",
                desc: "將重金屬與嘻哈、放克、電子音樂融合，特徵是降弦吉他與饒舌式的主唱。",
                subGenres: ["Rap Metal", "Funk Metal", "Industrial Metal"],
                artists: ["Linkin Park", "Limp Bizkit", "Korn", "Slipknot"]
                },
                {
                genre: "青少年流行 (Teen Pop)",
                desc: "偶像團體與年輕獨唱歌手主導市場，精心包裝的形象與編舞是特徵。",
                subGenres: ["Bubblegum Pop", "Dance-Pop", "Europop"],
                artists: ["Britney Spears", "NSYNC", "Backstreet Boys", "Christina Aguilera"]
                },
                {
                genre: "當代 R&B (Contemporary R&B)",
                desc: "更加電子化與節奏化的 R&B，成為排行榜上的絕對主流。",
                subGenres: ["Crunk&B", "Quiet Storm", "2-Step Garage"],
                artists: ["Destiny's Child", "Usher", "Aaliyah", "Alicia Keys"]
                },
                {
                genre: "後搖滾 (Post-Rock)",
                desc: "使用搖滾樂器但非搖滾結構，強調氛圍、紋理與高潮堆疊，通常為純器樂。",
                subGenres: ["Math Rock", "Shoegaze", "Instrumental Rock"],
                artists: ["Sigur Rós", "Explosions in the Sky", "Mogwai", "Godspeed You! Black Emperor"]
                }
            ],
            2005: [
                {
                genre: "Emo / Pop Punk (情緒搖滾)",
                desc: "從地下龐克發展而來，歌詞極度情緒化與個人化，搭配標誌性的時尚風格。",
                subGenres: ["Screamo", "Neon Pop", "Midwest Emo"],
                artists: ["My Chemical Romance", "Fall Out Boy", "Panic! at the Disco", "Paramore"]
                },
                {
                genre: "Crunk / 南方嘻哈",
                desc: "源於美國南部的嘻哈風格，特徵是高能量的合成器與吼叫式的饒舌。",
                subGenres: ["Snap Music", "Dirty South", "Crunkcore"],
                artists: ["Lil Jon", "T.I.", "Ludacris", "Soulja Boy"]
                },
                {
                genre: "獨立搖滾復興",
                desc: "車庫搖滾與後龐克的復興，強調低傳真 (Lo-fi) 美學與復古風格。",
                subGenres: ["Garage Rock Revival", "Post-Punk Revival", "Dance-Punk"],
                artists: ["The Strokes", "Arctic Monkeys", "The White Stripes", "The Killers"]
                },
                {
                genre: "新靈魂樂 (Neo-Soul)",
                desc: "回歸 70 年代靈魂樂的根源，融合爵士與嘻哈，強調現場樂器與有機的聽感。",
                subGenres: ["Alternative R&B", "Jazz-Soul", "Nu-Jazz"],
                artists: ["Amy Winehouse", "John Legend", "Erykah Badu", "D'Angelo"]
                }
            ],
            2010: [
                {
                genre: "EDM / 電氣流行",
                desc: "電子舞曲全面攻佔流行榜，House、Dubstep 等元素被大量運用於流行歌曲中。",
                subGenres: ["Big Room House", "Dubstep", "Electro Pop", "Complextro"],
                artists: ["Avicii", "Calvin Harris", "Lady Gaga", "David Guetta"]
                },
                {
                genre: "主流嘻哈 (Mainstream Hip Hop)",
                desc: "嘻哈音樂開始旋律化，饒舌與歌唱的界線模糊，超級巨星誕生。",
                subGenres: ["Pop Rap", "Cloud Rap", "Alternative Hip Hop"],
                artists: ["Drake", "Kanye West", "Nicki Minaj", "Kendrick Lamar"]
                },
                {
                genre: "獨立流行 (Indie Pop)",
                desc: "具有民謠或電子元素的獨立音樂獲得商業成功，風格清新且文青。",
                subGenres: ["Indietronica", "Chamber Pop", "Dream Pop"],
                artists: ["Florence + The Machine", "Foster the People", "Lana Del Rey", "Lorde"]
                },
                {
                genre: "蒸汽波 (Vaporwave)",
                desc: "誕生於網路的微流派，大量取樣 80/90 年代廣告與電梯音樂，帶有諷刺消費主義的意味。",
                subGenres: ["Future Funk", "Mallsoft", "Synthwave"],
                artists: ["Macintosh Plus", "Saint Pepsi", "Blank Banshee", "Yung Bae"]
                }
            ],
            2015: [
                {
                genre: "Trap (陷阱音樂)",
                desc: "源於亞特蘭大的嘻哈分支，特徵是 808 鼓機、Hi-hat 連擊與黑暗的氛圍。",
                subGenres: ["Drill", "Latin Trap", "Mumble Rap", "Emo Rap"],
                artists: ["Future", "Migos", "Travis Scott", "Cardi B"]
                },
                {
                genre: "熱帶浩室 (Tropical House)",
                desc: "BPM 較慢，使用排笛、馬林巴琴等熱帶風情音色，聽感放鬆愉悅。",
                subGenres: ["Deep House", "Chillout", "Melodic House"],
                artists: ["Kygo", "Justin Bieber", "Major Lazer", "Robin Schulz"]
                },
                {
                genre: "串流時代流行 (Streaming Pop)",
                desc: "為適應串流平台演算法，歌曲變短、副歌前置，曲風偏向 Mood Music。",
                subGenres: ["Chill Pop", "Sad Pop", "Alt-Pop"],
                artists: ["The Weeknd", "Ariana Grande", "Post Malone", "Halsey"]
                },
                {
                genre: "現代爵士 / 跨界爵士",
                desc: "新一代爵士樂手將 Hip-Hop、電子與 R&B 元素完美融合，讓爵士樂再次酷起來。",
                subGenres: ["Jazz-Rap", "UK Jazz Scene", "West Coast Get Down"],
                artists: ["Kamasi Washington", "Thundercat", "Robert Glasper", "Snarky Puppy"]
                }
            ],
            2020: [
                {
                genre: "臥室流行 (Bedroom Pop)",
                desc: "DIY 精神的極致，年輕音樂人在家製作音樂，呈現 Lo-fi、夢幻且私密的質感。",
                subGenres: ["Lo-fi Hip Hop", "Dream Pop", "Slacker Rock"],
                artists: ["Clairo", "Billie Eilish", "Joji", "Rex Orange County"]
                },
                {
                genre: "K-Pop (韓國流行音樂)",
                desc: "突破語言藩籬成為全球現象級文化，結合了極致的視覺、舞蹈與多元曲風。",
                subGenres: ["K-R&B", "K-Hip Hop", "Girl Crush"],
                artists: ["BTS", "BLACKPINK", "NewJeans", "TWICE"]
                },
                {
                genre: "復古未來主義 (Nu-Disco)",
                desc: "80 年代復古風潮回歸，加上現代的製作技術，強調合成器與迪斯可節奏。",
                subGenres: ["Synth-Pop Revival", "City Pop Revival", "French House"],
                artists: ["Dua Lipa", "The Weeknd", "Doja Cat", "Harry Styles"]
                },
                {
                genre: "Phonk / Drift Phonk",
                desc: "源於地下嘻哈，透過 TikTok 爆紅，特徵是高失真牛鈴聲與暗黑氛圍，常搭配賽車影片。",
                subGenres: ["Drift Phonk", "Wave", "Hard Phonk"],
                artists: ["Kordhell", "DVRST", "Freddie Dredd", "Hensonn"]
                }
            ],
            2025: [
                {
                genre: "Hyperpop / Glitchcore",
                desc: "將流行樂極端化、誇張化，充滿失真、變調與高速度，反映網路原生世代的審美。",
                subGenres: ["Digicore", "Dariacore", "Cyberpop"],
                artists: ["Charli XCX", "100 gecs", "Sophie", "PinkPantheress"]
                },
                {
                genre: "拉丁都市流行 (Latin Urban)",
                desc: "拉丁節奏徹底全球化，Reggaeton 與 Pop、Trap 融合，成為串流平台上的霸主。",
                subGenres: ["Neoperreo", "Latin Trap", "Bachata Fusion"],
                artists: ["Bad Bunny", "Karol G", "Rosalía", "Rauw Alejandro"]
                },
                {
                genre: "AI 協作與短影音流行",
                desc: "受 TikTok 等短影音平台影響極深，歌曲片段化，AI 技術開始輔助甚至主導製作流程。",
                subGenres: ["Speed Up Songs", "AI Generated", "Meme Music"],
                artists: ["Ice Spice", "Tate McRae", "New Viral Stars", "AI Idols"]
                },
                {
                genre: "新迷幻 / 全球律動 (Neo-Psych)",
                desc: "迷幻搖滾與全球各地傳統音樂(如非洲節奏、泰國放克)的融合，強調沈浸式體驗。",
                subGenres: ["Psych-Pop", "Desert Blues", "World Fusion"],
                artists: ["Tame Impala", "Khruangbin", "King Gizzard", "Glass Animals"]
                }
            ]
        };
        // --- 資料庫結束 ---

        const years = Object.keys(musicData).map(Number).sort((a, b) => a - b);

        const allGenresList = Object.values(musicData)
        .flat()
        .sort((a, b) => a.genre.localeCompare(b.genre));

        const getArtistImage = (artistName) => {
            const encodedName = encodeURIComponent(artistName);
            return `https://ui-avatars.com/api/?name=${encodedName}&background=random&color=fff&size=128&bold=true`;
        };

        const getGoogleSearchUrl = (query, type = "artist") => {
            const suffix = type === "genre" ? " music genre" : " music artist";
            return `https://www.google.com/search?q=${encodeURIComponent(query + suffix)}`;
        };

        const GenreCard = ({ item }) => {
            const [showSubGenres, setShowSubGenres] = useState(false);

            return (
                <div 
                className="bg-slate-800 rounded-2xl overflow-hidden border border-slate-700 hover:border-purple-500/50 transition-all duration-300 hover:shadow-2xl hover:shadow-purple-500/10 group flex flex-col relative h-full"
                >
                <div className="h-2 bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 transform origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-500"></div>
                
                <div className="p-6 flex-1 flex flex-col">
                    <div className="flex items-start justify-between gap-2 mb-4">
                    <div className="flex items-center gap-3">
                        <div className="p-2 bg-slate-700/50 rounded-lg text-purple-400 group-hover:text-white group-hover:bg-purple-500 transition-colors duration-300 shrink-0">
                        <Play size={20} fill="currentColor" />
                        </div>
                        <h3 className="text-xl font-bold text-white leading-tight">
                        {item.genre}
                        </h3>
                    </div>
                    </div>

                    <div className="relative flex-1">
                    <div className={`transition-opacity duration-300 ${showSubGenres ? 'opacity-10 invisible' : 'opacity-100 visible'}`}>
                        <p className="text-slate-300 text-sm leading-relaxed mb-6">
                        {item.desc}
                        </p>
                        
                        <div className="mt-auto">
                        <div className="flex items-center gap-2 mb-3 text-xs font-semibold text-slate-500 uppercase tracking-wider">
                            <Users size={14} />
                            <span>代表藝人</span>
                        </div>
                        <div className="grid grid-cols-2 gap-3">
                            {item.artists.map((artist, idx) => (
                            <a 
                                key={idx} 
                                href={getGoogleSearchUrl(artist, "artist")}
                                target="_blank"
                                rel="noopener noreferrer"
                                className="flex items-center gap-2 p-2 rounded-lg bg-slate-900/50 border border-slate-700/50 hover:bg-slate-700 hover:border-purple-400/50 transition-all duration-200 group/artist cursor-pointer"
                                title={`在 Google 搜尋 ${artist}`}
                            >
                                <img 
                                src={getArtistImage(artist)}
                                alt={artist}
                                className="w-8 h-8 rounded-full object-cover border border-slate-600 group-hover/artist:border-purple-400 transition-colors shrink-0"
                                onError={(e) => {
                                    e.target.onerror = null;
                                    e.target.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(artist)}&background=334155&color=94a3b8`;
                                }}
                                />
                                <div className="flex flex-col overflow-hidden">
                                <span className="text-xs md:text-sm text-slate-300 group-hover/artist:text-white font-medium truncate">
                                    {artist}
                                </span>
                                <span className="text-[10px] text-slate-500 flex items-center gap-1 opacity-0 group-hover/artist:opacity-100 transition-opacity">
                                    <Search size={8} /> Google
                                </span>
                                </div>
                            </a>
                            ))}
                        </div>
                        </div>
                    </div>

                    <div 
                        className={`absolute inset-0 bg-slate-800/95 backdrop-blur-sm rounded-xl flex flex-col justify-center items-center p-4 text-center transition-all duration-300 transform ${showSubGenres ? 'opacity-100 scale-100 z-10' : 'opacity-0 scale-95 -z-10'}`}
                    >
                        <h4 className="text-lg font-bold text-purple-400 mb-4 flex items-center gap-2">
                        <GitBranch size={20} />
                        衍生類別
                        </h4>
                        <div className="flex flex-wrap justify-center gap-2">
                        {item.subGenres && item.subGenres.map((sub, idx) => (
                            <a 
                            key={idx} 
                            href={getGoogleSearchUrl(sub, "genre")}
                            target="_blank"
                            rel="noopener noreferrer"
                            className="px-3 py-1.5 bg-purple-500/20 text-purple-200 rounded-full text-sm border border-purple-500/30 hover:bg-purple-500 hover:text-white hover:border-purple-400 transition-all cursor-pointer flex items-center gap-1 group/chip"
                            title={`在 Google 搜尋 ${sub}`}
                            >
                            {sub}
                            <Search size={10} className="opacity-0 group-hover/chip:opacity-100 transition-opacity" />
                            </a>
                        ))}
                        {!item.subGenres && <span className="text-slate-500 text-sm">無資料</span>}
                        </div>
                        <button 
                        onClick={() => setShowSubGenres(false)}
                        className="mt-6 p-2 rounded-full bg-slate-700 text-slate-300 hover:bg-slate-600 hover:text-white transition-colors"
                        >
                        <X size={20} />
                        </button>
                    </div>
                    </div>

                    {!showSubGenres && item.subGenres && (
                    <button 
                        onClick={() => setShowSubGenres(true)}
                        className="absolute top-6 right-6 p-2 text-slate-500 hover:text-purple-400 hover:bg-purple-400/10 rounded-full transition-all"
                        title="查看衍生類別"
                    >
                        <GitBranch size={20} />
                    </button>
                    )}
                </div>
                </div>
            );
        };

        const App = () => {
            const [selectedYear, setSelectedYear] = useState(1960);
            const [viewMode, setViewMode] = useState('timeline');
            const [searchTerm, setSearchTerm] = useState('');
            const scrollRef = useRef(null);

            const handleYearChange = (year) => {
                setSelectedYear(year);
            };

            const scroll = (direction) => {
                if (scrollRef.current) {
                const { current } = scrollRef;
                const scrollAmount = 200;
                if (direction === 'left') {
                    current.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
                } else {
                    current.scrollBy({ left: scrollAmount, behavior: 'smooth' });
                }
                }
            };

            const filteredGenres = allGenresList.filter(item => 
                item.genre.toLowerCase().includes(searchTerm.toLowerCase()) || 
                item.desc.toLowerCase().includes(searchTerm.toLowerCase())
            );

            return (
                <div className="min-h-screen bg-slate-900 text-slate-100 font-sans selection:bg-purple-500 selection:text-white pb-12">
                <header className="bg-slate-800/50 backdrop-blur-md sticky top-0 z-50 border-b border-slate-700">
                    <div className="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
                    <div className="flex items-center gap-3">
                        <div className="p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg shadow-lg shadow-purple-500/20">
                        <Music className="w-6 h-6 text-white" />
                        </div>
                        <h1 className="text-xl md:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400 cursor-pointer" onClick={() => setViewMode('timeline')}>
                        音樂時光機
                        </h1>
                    </div>
                    
                    <div className="flex items-center gap-3">
                        <button
                        onClick={() => {
                            setViewMode(viewMode === 'timeline' ? 'list' : 'timeline');
                            window.scrollTo({ top: 0, behavior: 'smooth' });
                        }}
                        className="flex items-center gap-2 px-4 py-2 bg-slate-700/50 hover:bg-slate-700 border border-slate-600 rounded-full text-sm font-medium transition-all duration-300 hover:border-purple-500 group"
                        >
                        {viewMode === 'timeline' ? (
                            <>
                            <List size={18} className="group-hover:text-purple-400 transition-colors" />
                            <span className="hidden md:inline group-hover:text-white">百科列表</span>
                            </>
                        ) : (
                            <>
                            <Clock size={18} className="group-hover:text-purple-400 transition-colors" />
                            <span className="hidden md:inline group-hover:text-white">返回時間軸</span>
                            </>
                        )}
                        </button>
                    </div>
                    </div>
                </header>

                <main className="max-w-7xl mx-auto px-4 mt-8">
                    {viewMode === 'timeline' ? (
                    <>
                        <div className="text-center mb-10 animate-fade-in">
                        <h2 className="text-3xl md:text-5xl font-black mb-4 text-white">
                            探索 <span className="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400">{selectedYear}</span> 年
                        </h2>
                        <p className="text-slate-400 text-lg">
                            那一年，全世界都在聽什麼？
                        </p>
                        </div>

                        <div className="relative mb-12 group animate-fade-in-up">
                        <button 
                            onClick={() => scroll('left')}
                            className="absolute left-0 top-1/2 -translate-y-1/2 z-10 p-2 bg-slate-800 rounded-full shadow-lg border border-slate-700 text-white hover:bg-slate-700 transition-colors hidden md:block opacity-0 group-hover:opacity-100"
                        >
                            <ChevronLeft size={24} />
                        </button>
                        
                        <div 
                            ref={scrollRef}
                            className="flex overflow-x-auto gap-3 py-4 px-2 scrollbar-hide snap-x"
                            style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}
                        >
                            {years.map((year) => (
                            <button
                                key={year}
                                onClick={() => handleYearChange(year)}
                                className={`
                                snap-center flex-shrink-0 px-6 py-3 rounded-xl font-bold text-lg transition-all duration-300 transform
                                ${selectedYear === year 
                                    ? 'bg-gradient-to-r from-purple-600 to-pink-600 text-white scale-110 shadow-lg shadow-purple-500/30 ring-2 ring-purple-400/50' 
                                    : 'bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white'}
                                `}
                            >
                                {year}
                            </button>
                            ))}
                        </div>

                        <button 
                            onClick={() => scroll('right')}
                            className="absolute right-0 top-1/2 -translate-y-1/2 z-10 p-2 bg-slate-800 rounded-full shadow-lg border border-slate-700 text-white hover:bg-slate-700 transition-colors hidden md:block opacity-0 group-hover:opacity-100"
                        >
                            <ChevronRight size={24} />
                        </button>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 animate-fade-in-up delay-100">
                        {musicData[selectedYear].map((item, index) => (
                            <GenreCard key={index} item={item} />
                        ))}
                        </div>
                    </>
                    ) : (
                    <div className="animate-fade-in">
                        <div className="text-center mb-10">
                        <h2 className="text-3xl md:text-4xl font-black mb-6 text-white">
                            音樂流派百科
                        </h2>
                        <div className="max-w-xl mx-auto relative">
                            <input 
                            type="text" 
                            placeholder="搜尋流派、關鍵字..." 
                            value={searchTerm}
                            onChange={(e) => setSearchTerm(e.target.value)}
                            className="w-full px-5 py-3 rounded-full bg-slate-800 border border-slate-700 text-white focus:outline-none focus:ring-2 focus:ring-purple-500 pl-12 transition-all shadow-lg"
                            />
                            <Search className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400" size={20} />
                        </div>
                        </div>

                        <div className="flex items-center justify-between mb-6 text-slate-400 text-sm px-2">
                        <span>共找到 {filteredGenres.length} 個類別</span>
                        <div className="flex items-center gap-2">
                            <Filter size={14} />
                            <span>排序：A-Z</span>
                        </div>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                        {filteredGenres.length > 0 ? (
                            filteredGenres.map((item, index) => (
                            <GenreCard key={index} item={item} />
                            ))
                        ) : (
                            <div className="col-span-full text-center py-20 text-slate-500">
                            <p className="text-xl">找不到相關結果</p>
                            <button onClick={() => setSearchTerm('')} className="mt-4 text-purple-400 hover:text-purple-300">
                                清除搜尋
                            </button>
                            </div>
                        )}
                        </div>
                    </div>
                    )}

                    <div className="mt-12 p-4 rounded-xl bg-slate-800/30 border border-slate-700/50 flex gap-3 items-start text-sm text-slate-400">
                    <Info size={18} className="mt-0.5 flex-shrink-0 text-purple-400" />
                    <p>
                        {viewMode === 'timeline' 
                        ? "點擊藝人可前往 Google 搜尋。點擊卡片右上角的圖示可查看衍生類別，點擊類別亦可進行搜尋。" 
                        : "此為音樂百科視圖，匯總了所有時間軸上的音樂流派資料。"}
                        本資料庫包含主流與非主流（如爵士、地下音樂）類別。
                    </p>
                    </div>
                </main>
                </div>
            );
        };

        // 渲染應用程式
        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>